(this["webpackJsonpmesto-react-auth"]=this["webpackJsonpmesto-react-auth"]||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/logo.a56cd5e0.svg"},26:function(e,t,a){e.exports=a.p+"static/media/success-icon.7fc4c149.svg"},27:function(e,t,a){e.exports=a.p+"static/media/fail-icon.c32299fa.svg"},29:function(e,t,a){e.exports=a(40)},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(23),r=a.n(c),i=(a(34),a(28)),l=a(1),s=a(14),u=a(15),p=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(s.a)(this,e),this.baseUrl=a,this.headers=n}return Object(u.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}},{key:"getItems",value:function(e){var t=this;return fetch(this.baseUrl.concat(e),{headers:this.headers}).then((function(e){return t._getResponseData(e)}))}},{key:"createItem",value:function(e,t){var a=this;return fetch(this.baseUrl.concat(t),{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return a._getResponseData(e)}))}},{key:"changeItem",value:function(e,t){var a=this;return fetch(this.baseUrl.concat(t),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return a._getResponseData(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?this.replaceItem("cards/likes",e):this.deleteItem("cards/likes",e)}},{key:"replaceItem",value:function(e,t){var a=this;return fetch(this.baseUrl.concat(e).concat("/".concat(t)),{method:"PUT",headers:this.headers}).then((function(e){return a._getResponseData(e)}))}},{key:"deleteItem",value:function(e,t){var a=this;return fetch(this.baseUrl.concat(e).concat("/".concat(t)),{method:"DELETE",headers:this.headers}).then((function(e){return a._getResponseData(e)}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/".concat("cohort-14","/"),headers:{authorization:"3829caf2-6683-412f-9e00-d0870fcd1817","Content-Type":"application/json"}}),m=a(24),_=a.n(m),d=a(2),f=a(7);var h=function(e){var t=e.onSignOut,a=e.userEmail.email;return o.a.createElement("header",{className:"header page__header section"},o.a.createElement("a",{href:"/",className:"logo header__logo"},o.a.createElement("img",{className:"logo__image",src:_.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 Mesto"})),o.a.createElement(d.d,null,o.a.createElement(d.b,{path:"/sign-up"},o.a.createElement(f.b,{to:"./sign-in",className:"link header__link"},"\u0412\u0445\u043e\u0434")),o.a.createElement(d.b,{path:"/sign-in"},o.a.createElement(f.b,{to:"./sign-up",className:"link header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),o.a.createElement(d.b,{path:"/"},o.a.createElement("div",{className:"header__user-info"},o.a.createElement("p",{className:"header__email"},a),o.a.createElement("button",{onClick:t,className:"header__button"},"\u0412\u044b\u0439\u0442\u0438")))))},v=a(16),b=o.a.createContext();function E(e){var t=e.onCardClick,a=e.card,n=e.onCardLike,c=e.onCardDelete,r=e.owner,i=e.likes,l=e.name,s=e.link;var u=o.a.useContext(b),p=r._id===u._id,m=i.some((function(e){return e._id===u._id}))?"place__like-button place__like-button_active":"place__like-button";return o.a.createElement("li",{className:"places__item"},o.a.createElement("figure",{className:"place"},o.a.createElement("button",{className:p?"link place__delete-button":"link place__delete-button place__delete-button_disabled",onClick:function(e){var t=e.target.closest(".places__item");c(a,t)}}),o.a.createElement("img",{src:s,alt:l,className:"place__image",onClick:function(){t(a)}}),o.a.createElement("div",{className:"place__wrapper"},o.a.createElement("h2",{className:"place__name"},l," "),o.a.createElement("button",{className:"place__like-button-container"},o.a.createElement("div",{className:m,onClick:function(){n(a)}}),o.a.createElement("div",{className:"place__like-counter"},i.length)))))}var g=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,c=e.handleCardClick,r=e.cards,i=e.onCardLike,l=e.onCardDelete,s=(Object(v.a)(e,["onEditProfile","onAddPlace","onEditAvatar","handleCardClick","cards","onCardLike","onCardDelete"]),o.a.useContext(b));return o.a.createElement("main",{className:"content page__content section"},o.a.createElement("section",{className:"profile section"},o.a.createElement("div",{className:"profile__image",onClick:n,style:{backgroundImage:"url(".concat(s.avatar,")")}}),o.a.createElement("div",{className:"profile__info"},o.a.createElement("div",{className:"profile__name-wrap"},o.a.createElement("h1",{className:"profile__name"},s.name),o.a.createElement("button",{className:"link profile__edit-button",onClick:t})),o.a.createElement("p",{className:"profile__job"},s.about)),o.a.createElement("button",{className:"link profile__add-button",onClick:a})),o.a.createElement("section",{className:"places section"},o.a.createElement("ul",{className:"places__list"},o.a.createElement("li",{className:"places__empty-list"},"\u041d\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043c\u0435\u0441\u0442"),r.map((function(e){return o.a.createElement(E,Object.assign({key:e._id,onCardClick:c,card:e,onCardLike:i,onCardDelete:l},e))})))))};var k=function(){return o.a.createElement("footer",{className:"footer section page__footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))},y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:".popup__input-error",errorActiveClass:"popup__input-error_active",controlSelector:".popup__label"};var N=function(){function e(t,a){Object(s.a)(this,e),this._formSelectorsObj=t,this._formElement=a,this._inputList=Array.from(a.querySelectorAll(t.inputSelector)),this._buttonElement=a.querySelector(t.submitButtonSelector),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorActiveClass=t.errorActiveClass,this._controlSelector=t.controlSelector}return Object(u.a)(e,[{key:"_findInputError",value:function(e){return e.closest(this._controlSelector).querySelector(this._inputErrorClass)}},{key:"_showInputError",value:function(e,t){var a=this._findInputError(e);a.textContent=t,a.classList.add(this._errorActiveClass)}},{key:"_hideInputError",value:function(e){var t=this._findInputError(e);t.classList.remove(this._errorActiveClass),t.textContent=""}},{key:"_isInputWithoutSpacingInvalid",value:function(e){var t=e.value.trim();return 0===t.length?1:t.length<2?2:0}},{key:"_checkInputValidity",value:function(e){var t=this._findInputError(e);switch(this._isInputWithoutSpacingInvalid(e)){case 1:t.textContent="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435.",t.classList.add(this._errorActiveClass);break;case 2:t.textContent="\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u043a\u043e\u0440\u043e\u0447\u0435 2 \u0441\u0438\u043c\u0432. \u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u0435\u0439\u0447\u0430\u0441: 1 \u0441\u0438\u043c\u0432\u043e\u043b.",t.classList.add(this._errorActiveClass);break;case 0:e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage);break;default:alert("error")}}},{key:"hasInvalidInput",value:function(){var e=this;return this._inputList.some((function(t){return!t.validity.valid||e._isInputWithoutSpacingInvalid(t)}))}},{key:"_toggleButtonState",value:function(){this.hasInvalidInput()?this._buttonElement.classList.add(this._inactiveButtonClass):this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}]),e}();var C=function(e){var t=e.title,a=e.name,n=e.buttonText,c=e.isOpen,r=e.onClose,i=e.onSubmit,l=e.children;function s(){if(c){var e=document.querySelector(".popup__form_type_".concat(a)),t=new N(y,e);return t.enableValidation(),!t.hasInvalidInput()}}function u(){document.querySelector(".popup__form_type_".concat(a)).reset(),r(),window.removeEventListener("keydown",p)}function p(e){"Escape"===e.key&&u()}return s(),c&&window.addEventListener("keydown",(function(e){return p(e)})),o.a.createElement("section",{className:"popup popup_type_form popup_type_".concat(a," ").concat(c&&"popup_opened"),onClick:function(e){e.target===e.currentTarget&&u()}},o.a.createElement("div",{className:"popup__container"},o.a.createElement("button",{className:"link popup__close-button",onClick:u}),o.a.createElement("form",{className:"popup__form popup__form_type_".concat(a),noValidate:!0,name:a,onSubmit:function(e){e.preventDefault(),s()&&(i(e),document.querySelector(".popup__form_type_".concat(a)).reset())}},o.a.createElement("h2",{className:"popup__title"},t),o.a.createElement("fieldset",{className:"popup__fieldset"},l,o.a.createElement("button",{className:"link popup__save-button popup__save-button_type_".concat(a),autoFocus:!0,type:"submit"},n)))))};var O=function(e){var t=e.title,a=e.name,n=e.card,c=e.cardDOM,r=e.buttonText,i=e.isOpen,l=e.onClose,s=e.onCardDeleteSubmit;return o.a.createElement(C,{title:t,name:a,buttonText:r,isOpen:i,onClose:l,onSubmit:function(e){e.preventDefault(),s(n,c)}})};var j=function(e){var t=e.card,a=e.onClose,n=e.isOpen,c=e.name;function r(){a(),window.removeEventListener("keydown",i)}function i(e){"Escape"===e.key&&r()}return n&&window.addEventListener("keydown",i),o.a.createElement("section",{className:"popup popup_type_".concat(c," ").concat(n&&"popup_opened","\n                "),onClick:function(e){e.target===e.currentTarget&&r()}},o.a.createElement("div",{className:"popup__container-pic-zoom"},o.a.createElement("button",{className:"link popup__close-button",onClick:r}),o.a.createElement("figure",{className:"picture-zoom"},o.a.createElement("img",{src:t?t.link:"",alt:t?t.name:"",className:"picture-zoom__img"}),o.a.createElement("p",{className:"picture-zoom__title"},t?t.name:""))))};var S=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateUser,r=o.a.useContext(b),i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],p=s[1],m=Object(n.useState)(""),_=Object(l.a)(m,2),d=_[0],f=_[1];return Object(n.useEffect)((function(){p(r.name),f(r.about)}),[r]),o.a.createElement(C,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:function(){p(r.name),f(r.about),a()},onSubmit:function(e){e.preventDefault(),c({name:u,about:d})}},o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"text",value:u,onChange:function(e){p(e.target.value)},name:"profile-name",placeholder:"\u0418\u043c\u044f",id:"profile-name",className:"input popup__input popup__input_type_name",required:!0,minLength:"2",maxLength:"40"}),o.a.createElement("span",{className:"popup__input-error js-popup__input-error_type_profile"})),o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"text",value:d,onChange:function(e){f(e.target.value)},name:"profile-job",id:"profile-job",placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",className:"input popup__input popup__input_type_job",required:!0,minLength:"2",maxLength:"200"}),o.a.createElement("span",{className:"popup__input-error js-popup__input-error_type_profile"})))};var w=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateAvatar,r=Object(n.useRef)({});return o.a.createElement(C,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:a,onSubmit:function(e){c({avatar:r.current.value})}},o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{ref:r,type:"url",name:"avatar",id:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"input popup__input popup__input_type_avatar",required:!0}),o.a.createElement("span",{className:"popup__input-error"})))};var I=function(e){var t=e.isOpen,a=e.onClose,c=e.onAddPlace,r=Object(n.useState)(""),i=Object(l.a)(r,2),s=i[0],u=i[1],p=Object(n.useState)(""),m=Object(l.a)(p,2),_=m[0],d=m[1];return o.a.createElement(C,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-place",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:function(){u(""),d(""),a()},onSubmit:function(e){e.preventDefault(),c({name:s,link:_}),u(""),d("")}},o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"text",value:s,onChange:function(e){u(e.target.value)},name:"place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"place-name",className:"input popup__input popup__input_type_place-name",required:!0,minLength:"2",maxLength:"30"}),o.a.createElement("span",{className:"popup__input-error"})),o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"url",value:_,onChange:function(e){d(e.target.value)},name:"place-pic",id:"place-pic",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"input popup__input popup__input_type_place-pic",required:!0}),o.a.createElement("span",{className:"popup__input-error"})))},L=a(9),x=a(10);var A=function(e){var t=e.title,a=e.children,n=e.onSubmit;return o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"popup__register-login"},o.a.createElement("section",{className:"popup__container-register-login"},o.a.createElement("form",{className:"popup__form",noValidate:!0,onSubmit:n},o.a.createElement("h2",{className:"popup__title popup__title_type_login"},t),o.a.createElement("fieldset",{className:"popup__fieldset"},a)))))},D=function(e){var t=e.onLogin,a=e.message,c=e.loggedIn,r=Object(n.useState)({email:"",password:""}),i=Object(l.a)(r,2),s=i[0],u=i[1],p=function(e){var t=e.target,a=t.name,n=t.value;u((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(L.a)({},a,n))}))};return o.a.useEffect((function(){c&&u({email:"",password:""})}),[c]),o.a.createElement("div",{className:"login"},o.a.createElement(A,{title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){e.preventDefault();var a=s.email,n=s.password;a&&n&&t(a,n)}},o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"email",value:s.email,onChange:p,name:"email",placeholder:"Email",id:"email",className:"input popup__input popup__input_type_dark",required:!0,minLength:"2",maxLength:"320"}),o.a.createElement("span",{className:"popup__input-error"},a)),o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"password",value:s.password,onChange:p,name:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"input popup__input popup__input_type_dark",required:!0,minLength:"2",maxLength:"200"}),o.a.createElement("span",{className:"popup__input-error"},a)),o.a.createElement("button",{className:"link popup__save-button popup__save-button_type_dark",autoFocus:!0,type:"submit"},"\u0412\u043e\u0439\u0442\u0438")))},q=function(e){var t=e.component,a=Object(v.a)(e,["component"]);return o.a.createElement(d.b,null,(function(){return!0===a.loggedIn?o.a.createElement(t,a):o.a.createElement(d.a,{to:"/sign-up"})}))},T=function(e){var t=e.onRegister,a=e.message,c=Object(n.useState)({email:"",password:""}),r=Object(l.a)(c,2),i=r[0],s=r[1],u=function(e){var t=e.target,a=t.name,n=t.value;s((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(L.a)({},a,n))}))};return o.a.createElement("div",{className:"register"},o.a.createElement(A,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onSubmit:function(e){e.preventDefault();var a=i.email,n=i.password;t(a,n)}},o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"email",value:i.email,onChange:u,name:"email",placeholder:"Email",id:"email",className:"input popup__input popup__input_type_dark",required:!0,minLength:"2",maxLength:"320"}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active"},a)),o.a.createElement("label",{className:"popup__label"},o.a.createElement("input",{type:"password",value:i.password,onChange:u,name:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",className:"input popup__input popup__input_type_dark",required:!0,minLength:"2",maxLength:"200"}),o.a.createElement("span",{className:"popup__input-error popup__input-error_active"},a)),o.a.createElement("button",{className:"link popup__save-button popup__save-button_type_dark",autoFocus:!0,type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),o.a.createElement(f.b,{to:"/sign-in",className:"link popup__login-link"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b? \u0412\u043e\u0439\u0442\u0438")))},P=a(26),U=a.n(P),B=a(27),R=a.n(B);var z=function(e){var t=e.isOpen,a=e.onClose,n=e.isSuccess;function c(){a(),window.removeEventListener("keydown",r)}function r(e){"Escape"===e.key&&c()}return t&&window.addEventListener("keydown",(function(e){return r(e)})),o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"popup popup_type_form ".concat(t&&"popup_opened"),onClick:function(e){e.target===e.currentTarget&&c()}},o.a.createElement("div",{className:"popup__container"},n?o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:U.a,alt:"\u0413\u0430\u043b\u043e\u0447\u043a\u0430",className:"popup__infotool-img"}),o.a.createElement("p",{className:"popup__infotool-text"},"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")):o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{src:R.a,alt:"\u041a\u0440\u0430\u0441\u043d\u044b\u0439 \u043a\u0440\u0435\u0441\u0442\u0438\u043a",className:"popup__infotool-img"}),o.a.createElement("p",{className:"popup__infotool-text"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437!")),o.a.createElement("button",{className:"popup__close-button",onClick:a}))))},F="https://auth.nomoreparties.co",J=function(e){return e.ok?e.json():Promise.reject(e.status)};var M=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),s=Object(l.a)(r,2),u=s[0],m=s[1],_=Object(n.useState)(!1),f=Object(l.a)(_,2),v=f[0],E=f[1],y=Object(n.useState)(!1),N=Object(l.a)(y,2),C=N[0],L=N[1],x=Object(n.useState)(!1),A=Object(l.a)(x,2),P=A[0],U=A[1],B=Object(n.useState)(!1),R=Object(l.a)(B,2),M=R[0],V=R[1],W=Object(n.useState)([]),G=Object(l.a)(W,2),H=G[0],$=G[1],K=Object(n.useState)({name:"\u0416\u0430\u043a \u0418\u0432 \u041a\u0443\u0441\u0442\u043e",about:"\u041c\u043e\u0440\u0435\u043f\u043b\u0430\u0432\u0430\u0442\u0435\u043b\u044c",avatar:"https://kaskad.tv/images/2020/foto_zhak_iv_kusto__-_interesnie_fakti_20190810_2078596433.jpg"}),Q=Object(l.a)(K,2),X=Q[0],Y=Q[1],Z=Object(n.useState)(),ee=Object(l.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(),oe=Object(l.a)(ne,2),ce=oe[0],re=oe[1],ie=Object(n.useState)({email:""}),le=Object(l.a)(ie,2),se=le[0],ue=le[1],pe=Object(n.useState)(!1),me=Object(l.a)(pe,2),_e=me[0],de=me[1],fe=Object(d.g)(),he=Object(n.useState)(""),ve=Object(l.a)(he,2),be=ve[0],Ee=ve[1],ge=Object(n.useState)(!1),ke=Object(l.a)(ge,2),ye=ke[0],Ne=ke[1];function Ce(){!function(){var e=document.querySelectorAll(".popup__input-error");e&&e.forEach((function(e){return e.classList.remove("popup__input-error_active")}))}(),E(!1),c(!1),m(!1),L(!1),U(!1),V(!1)}function Oe(e,t,a){t.textContent=e?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":a}function je(){V(!0)}function Se(){Ne(!1)}Object(n.useEffect)((function(){Promise.all([p.getItems("users/me"),p.getItems("cards")]).then((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];Y(a);var o=n.map((function(e){return{name:e.name,link:e.link,_id:e._id,likes:e.likes,owner:e.owner}}));$(o)})).catch((function(e){console.log("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a: ".concat(e))}))}),[]);var we=function(){var e=localStorage.getItem("jwt");e&&function(e){return fetch("".concat(F,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return J(e)}))}(e).then((function(e){if(e){var t={email:e.data.email};de(!0),ue(t),fe.push("/")}})).catch((function(e){console.log("getContent: ".concat(e))}))};return Object(n.useEffect)((function(){we()}),[]),o.a.createElement("div",{className:"page"},o.a.createElement("div",{className:"page__container"},o.a.createElement(b.Provider,{value:X},o.a.createElement(h,{onSignOut:function(){localStorage.removeItem("jwt"),fe.push("/sign-in")},userEmail:se}),o.a.createElement(d.d,null,o.a.createElement(d.b,{path:"/sign-up"},o.a.createElement(T,{onRegister:function(e,t){(function(e,t){return fetch("".concat(F,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return J(e)}))})(e,t).then((function(e){e&&e.data&&(Ee(""),Ne(!0),je(),fe.push("/sign-in"))})).catch((function(e){if(Ee("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0432 Register"),Se(),je(),400===e)return console.log("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439 : ".concat(e));console.log("App onRegister: ".concat(e))}))},message:be})),o.a.createElement(d.b,{path:"/sign-in"},o.a.createElement(D,{onLogin:function(e,t){(function(e,t){return fetch("".concat(F,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return J(e)}))})(e,t).then((function(t){return t?t.token?(function(e){localStorage.setItem("jwt",e)}(t.token),Ee(""),ue({email:e}),de(!0),fe.push("/"),_e):void 0:(Ee("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438."),!1)})).catch((function(e){return Ee("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438."),Se(),je(),401===e?console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d : ".concat(e)):400===e?console.log("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439 : ".concat(e)):void console.log("App authorize Error: ".concat(e))}))},message:be,loggedIn:_e})),o.a.createElement(q,{path:"/",loggedIn:_e,onEditProfile:function(){c(!0)},onAddPlace:function(){m(!0)},onEditAvatar:function(){E(!0)},handleCardClick:function(e){ae(e),U(!0)},cards:H,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===X._id}));p.changeLikeCardStatus(e._id,!t).then((function(t){var a=H.map((function(a){return a._id===e._id?t:a}));$(a)})).catch((function(e){console.log("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043b\u0430\u0439\u043a\u0430: ".concat(e))}))},onCardDelete:function(e,t){L(!0),ae(e),re(t)},component:g})),_e&&o.a.createElement(k,null),o.a.createElement(z,{isOpen:M,onClose:Ce,isSuccess:ye}),o.a.createElement(S,{isOpen:a,onClose:Ce,onUpdateUser:function(e){var t=document.querySelector(".popup__save-button_type_edit-profile");Oe(!0,t,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.changeItem({name:e.name.trim(),about:e.about.trim()},"users/me").then((function(e){Y(e)})).then((function(){Ce()})).catch((function(e){console.log("\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435: ".concat(e))})).finally((function(){Oe(!1,t,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}))}}),o.a.createElement(I,{isOpen:u,onClose:Ce,onAddPlace:function(e){var t=document.querySelector(".popup__save-button_type_add-place");Oe(!0,t,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),p.createItem(e,"cards").then((function(e){$([e].concat(Object(i.a)(H)))})).then((function(){Ce()})).catch((function(e){console.log("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ".concat(e))})).finally((function(){Oe(!1,t,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")}))}}),o.a.createElement(w,{isOpen:v,onClose:Ce,onUpdateAvatar:function(e){var t=document.querySelector(".popup__save-button_type_edit-avatar");Oe(!0,t,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.changeItem({avatar:e.avatar},"users/me/avatar").then((function(e){Y(e),document.querySelector(".profile__image").style.backgroundImage="url('".concat(e.avatar,"')")})).then((function(){Ce()})).catch((function(e){console.log("\u041f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ".concat(e))})).finally((function(){Oe(!1,t,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")}))}}),o.a.createElement(O,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"card-delete",card:te,cardDOM:ce,buttonText:"\u0414\u0430",isOpen:C,onClose:Ce,onCardDeleteSubmit:function(e,t){var a=document.querySelector(".popup__save-button_type_card-delete");Oe(!0,a,"\u0414\u0430"),p.deleteItem("cards",e._id).then((function(){t.remove()})).then((function(){Ce()})).catch((function(e){console.log("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ".concat(e))})).finally((function(){return Oe(!1,a,"\u0414\u0430")}))}}),o.a.createElement(j,{name:"picture-zoom",isOpen:P,card:te,onClose:Ce}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f.a,null,o.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.a75e87b3.chunk.js.map